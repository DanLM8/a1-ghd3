<!DOCTYPE html>
<div id="container"></div>
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script type="module">

  import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";

  console.log(d3); // test if d3 is loaded
  // Add an SVG
  // span the entire screen
    const width = window.innerWidth;
    const height = window.innerHeight;

    const svg = d3.select("#container")
      .append("svg")
      .attr("viewBox", `0 0 ${width} ${height}`)
      .attr("width", "100%")
      .attr("height", "100%");

  svg.append("text")
    .attr("x", width / 2 - 120)
    .attr("y", height / 2 - 200)
    .attr("font-size", 24)
    .attr("font-weight", "bold")
    .text("Hover over my left hand to say hello!");
  
  // Add Rectangles
  svg.append("rect")
    //place square in center of svg
    .attr("x", width / 2 - 25)
    .attr("y", height / 2 - 50)
    .attr("width", 50)
    .attr("height", 100)
    .attr("fill", "steelblue");

  // Add Circles
  svg.append("circle")
    //place circle above square
    .attr("cx", width / 2)
    .attr("cy", height / 2 - 75)
    .attr("r", 50)
    .attr("fill", "#f2c777");

  // Define defs for gradients
  const defs = svg.append("defs");

  //create two color gradients for arms
  const gradient1 = defs.append("linearGradient")
  .attr("id", "halfColor1")
  .attr("gradientUnits", "userSpaceOnUse")
  .attr("x1", width / 2 - 25)
  .attr("y1", height / 2 - 25)
  .attr("x2", width / 2 - 50)
  .attr("y2", height / 2 + 35);

  gradient1.append("stop")
    .attr("offset", "50%")
    .attr("stop-color", "steelblue");

  gradient1.append("stop")
    .attr("offset", "50%")
    .attr("stop-color", "#f2c777");

  const gradient2 = defs.append("linearGradient")
    .attr("id", "halfColor2")
    .attr("gradientUnits", "userSpaceOnUse")
    .attr("x1", width / 2 + 50)    
    .attr("y1", height / 2 + 35)   
    .attr("x2", width / 2 + 25)    
    .attr("y2", height / 2 - 25);

  gradient2.append("stop")
    .attr("offset", "50%")
    .attr("stop-color", "#f2c777");

  gradient2.append("stop")
    .attr("offset", "50%")
    .attr("stop-color", "steelblue");

  // Add Lines
  svg.append("line")
    //place "left arm" next to square
    .attr("x1", width / 2 - 25)
    .attr("y1", height / 2 - 25)
    .attr("x2", width / 2 - 50)
    .attr("y2", height / 2 + 35)
    .attr("stroke", "url(#halfColor1)")
    .attr("stroke-width", 10);

  const rightArm = svg.append("line")
    //place "right arm" next to square
    .attr("x1", width / 2 + 50)    
    .attr("y1", height / 2 + 35)   
    .attr("x2", width / 2 + 25)    
    .attr("y2", height / 2 - 25)   
    .attr("stroke", "url(#halfColor2)")
    .attr("stroke-width", 10);

  rightArm
    .on("mouseenter", function () {
      d3.select(this)

        .attr("transform", `rotate(-130 ${width / 2 + 25} ${height / 2 - 25})`);
    })
    .on("mouseleave", function () {
      d3.select(this)

        .attr("transform", `rotate(0 ${width / 2 + 50} ${height / 2 + 35})`);
    });


  svg.append("line")
    //place left leg below square
    .attr("x1", width / 2 - 15)
    .attr("y1", height / 2 + 50)
    .attr("x2", width / 2 - 15)
    .attr("y2", height / 2 + 120)
    .attr("stroke", "blue")
    .attr("stroke-width", 14);

  svg.append("line")
    //place right leg below square
    .attr("x1", width / 2 + 15)
    .attr("y1", height / 2 + 50)
    .attr("x2", width / 2 + 15)
    .attr("y2", height / 2 + 120)
    .attr("stroke", "blue")
    .attr("stroke-width", 14);

  // Add Polygons for shoes
  svg.append("polygon")
    .attr("points", `
      ${width / 2 - 25},${height / 2 + 120}  
      ${width / 2 - 5},${height / 2 + 120}  
      ${width / 2 - 15},${height / 2 + 130}  
    `)
    .attr("fill", "brown");

  svg.append("polygon")
    .attr("points", `
      ${width / 2 + 25},${height / 2 + 120}  
      ${width / 2 + 5},${height / 2 + 120}  
      ${width / 2 + 15},${height / 2 + 130}  
    `)
    .attr("fill", "brown");

  // add path for smiley face
  // used chatgpt to determine the curve for a smiley face (a quadratic bezier curve)
  svg.append("path")
  .attr("d", `
    M ${width / 2 - 20} ${height / 2 - 60}
    Q ${width / 2} ${height / 2 - 50}
      ${width / 2 + 20} ${height / 2 - 60}
  `)
  .attr("fill", "none")
  .attr("stroke", "black")
  .attr("stroke-width", 4)
  .attr("stroke-linecap", "round");

  // add circles for eyes
  svg.append("circle")
    .attr("cx", width / 2 - 15)
    .attr("cy", height / 2 - 80)
    .attr("r", 5)
    .attr("fill", "black");

  svg.append("circle")
    .attr("cx", width / 2 + 15)
    .attr("cy", height / 2 - 80)
    .attr("r", 5)
    .attr("fill", "black");

</script>